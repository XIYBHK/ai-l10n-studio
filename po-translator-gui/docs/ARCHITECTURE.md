# PO ç¿»è¯‘å·¥å…· - æ¶æ„æ–‡æ¡£

> **ç‰ˆæœ¬**: v1.0 (Tauri + Rust)  
> **æ›´æ–°æ—¥æœŸ**: 2025-01-06  
> **æ¶æ„ç›®æ ‡**: æ„å»ºé«˜æ€§èƒ½ã€æ˜“ç»´æŠ¤ã€æ¨¡å—åŒ–çš„æ¡Œé¢ç¿»è¯‘å·¥å…·

---

## ğŸ“ ç³»ç»Ÿæ¶æ„æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç”¨æˆ·ç•Œé¢å±‚ (React)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  MenuBar   â”‚  â”‚ EntryList  â”‚  â”‚ EditorPane â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚AIWorkspace â”‚  â”‚  Settings  â”‚  â”‚  MemoryMgr â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ Tauri IPC (invoke)
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å‘½ä»¤å±‚ (Rust Commands)                      â”‚
â”‚  â€¢ parse_po_file           â€¢ save_po_file                    â”‚
â”‚  â€¢ translate_batch         â€¢ translate_batch_with_stats      â”‚
â”‚  â€¢ get_translation_memory  â€¢ save_translation_memory         â”‚
â”‚  â€¢ get_app_config          â€¢ update_app_config               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æœåŠ¡å±‚ (Rust Services)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  POParser    â”‚  â”‚ AITranslator â”‚  â”‚ Translation  â”‚       â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚   Memory     â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚  â”‚    Batch     â”‚  â”‚    Config    â”‚                         â”‚
â”‚  â”‚  Translator  â”‚  â”‚   Manager    â”‚                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ HTTP (reqwest)
                         â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   AI API Provider   â”‚
              â”‚  (Moonshot/OpenAI)  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—‚ï¸ é¡¹ç›®ç»“æ„

### å‰ç«¯ (TypeScript + React)

```
src/
â”œâ”€â”€ main.tsx                    # åº”ç”¨å…¥å£
â”œâ”€â”€ App.tsx                     # æ ¹ç»„ä»¶
â”œâ”€â”€ App.css                     # å…¨å±€æ ·å¼
â”‚
â”œâ”€â”€ components/                 # UIç»„ä»¶å±‚
â”‚   â”œâ”€â”€ MenuBar.tsx            # é¡¶éƒ¨èœå•æ ï¼ˆæ–‡ä»¶ã€ç¿»è¯‘ã€è®¾ç½®ã€ä¸»é¢˜ï¼‰
â”‚   â”œâ”€â”€ EntryList.tsx          # æ¡ç›®åˆ—è¡¨ï¼ˆä¸‰åˆ—ï¼šæœªç¿»è¯‘/å¾…ç¡®è®¤/å·²ç¿»è¯‘ï¼‰
â”‚   â”œâ”€â”€ EditorPane.tsx         # ç¼–è¾‘å™¨é¢æ¿ï¼ˆåŸæ–‡/è¯‘æ–‡åŒæ ï¼‰
â”‚   â”œâ”€â”€ AIWorkspace.tsx        # AIå·¥ä½œåŒºï¼ˆç»Ÿè®¡ã€è¿›åº¦ï¼‰
â”‚   â”œâ”€â”€ MemoryManager.tsx      # è®°å¿†åº“ç®¡ç†ï¼ˆCRUDï¼‰
â”‚   â””â”€â”€ SettingsModal.tsx      # è®¾ç½®å¼¹çª—
â”‚
â”œâ”€â”€ hooks/                      # è‡ªå®šä¹‰Hooks
â”‚   â”œâ”€â”€ useTranslator.ts       # ç¿»è¯‘é€»è¾‘å°è£…
â”‚   â””â”€â”€ useTheme.ts            # ä¸»é¢˜ç®¡ç†
â”‚
â”œâ”€â”€ store/                      # çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ useAppStore.ts         # Zustandå…¨å±€çŠ¶æ€
â”‚
â”œâ”€â”€ theme/                      # ä¸»é¢˜é…ç½®
â”‚   â””â”€â”€ config.ts              # äº®è‰²/æš—è‰²ä¸»é¢˜
â”‚
â”œâ”€â”€ i18n/                       # å›½é™…åŒ–
â”‚   â”œâ”€â”€ config.ts              # i18nexté…ç½®
â”‚   â””â”€â”€ locales/
â”‚       â”œâ”€â”€ zh-CN.json         # ä¸­æ–‡
â”‚       â””â”€â”€ en-US.json         # è‹±æ–‡
â”‚
â””â”€â”€ types/                      # ç±»å‹å®šä¹‰
    â””â”€â”€ tauri.ts               # Tauriç±»å‹
```

### åç«¯ (Rust)

```
src-tauri/src/
â”œâ”€â”€ main.rs                     # ä¸»å…¥å£ï¼Œæ³¨å†Œcommands
â”‚
â”œâ”€â”€ commands/                   # Tauriå‘½ä»¤å±‚
â”‚   â”œâ”€â”€ mod.rs                 # æ¨¡å—å¯¼å‡º
â”‚   â””â”€â”€ translator.rs          # ç¿»è¯‘ç›¸å…³å‘½ä»¤
â”‚       â”œâ”€â”€ parse_po_file()
â”‚       â”œâ”€â”€ save_po_file()
â”‚       â”œâ”€â”€ translate_batch()
â”‚       â”œâ”€â”€ translate_batch_with_stats()
â”‚       â”œâ”€â”€ get_translation_memory()
â”‚       â”œâ”€â”€ save_translation_memory()
â”‚       â”œâ”€â”€ get_app_config()
â”‚       â”œâ”€â”€ update_app_config()
â”‚       â””â”€â”€ validate_config()
â”‚
â””â”€â”€ services/                   # ä¸šåŠ¡é€»è¾‘å±‚
    â”œâ”€â”€ mod.rs                 # æ¨¡å—å¯¼å‡º
    â”œâ”€â”€ po_parser.rs           # POæ–‡ä»¶è§£æ/å†™å…¥
    â”œâ”€â”€ ai_translator.rs       # AIç¿»è¯‘æ ¸å¿ƒ
    â”œâ”€â”€ translation_memory.rs  # ç¿»è¯‘è®°å¿†åº“
    â”œâ”€â”€ batch_translator.rs    # æ‰¹é‡ç¿»è¯‘
    â””â”€â”€ config_manager.rs      # é…ç½®ç®¡ç†
```

---

## ğŸ”„ æ•°æ®æµè®¾è®¡

### 1. æ–‡ä»¶åŠ è½½æµç¨‹

```
ç”¨æˆ·ç‚¹å‡»"æ‰“å¼€" 
  â†’ MenuBar.onOpenFile()
  â†’ invoke('parse_po_file', { filePath })
  â†’ POParser.parse_file()
  â†’ è¿”å› Vec<POEntry>
  â†’ useAppStore.setEntries()
  â†’ æ›´æ–°UI (EntryList + EditorPane)
```

### 2. ç¿»è¯‘æµç¨‹ï¼ˆå¸¦ç»Ÿè®¡ï¼‰

```
ç”¨æˆ·ç‚¹å‡»"æ‰¹é‡ç¿»è¯‘"
  â†’ MenuBar.onTranslateAll()
  â†’ æ”¶é›†æœªç¿»è¯‘æ¡ç›®
  â†’ invoke('translate_batch_with_stats', { texts, apiKey })
  
åç«¯å¤„ç†ï¼š
  1. TranslationMemory.preprocess()     # TMå‘½ä¸­æŸ¥æ‰¾
  2. æ–‡æœ¬å»é‡ (HashMap<String, Vec<usize>>)
  3. AITranslator.translate_batch()     # è°ƒç”¨AI
  4. is_simple_phrase() åˆ¤æ–­            # å†³å®šæ˜¯å¦å­¦ä¹ 
  5. TranslationMemory.add_translation() # å­¦ä¹ æ–°çŸ­è¯­
  6. è¿”å› TranslationStats
  
å‰ç«¯æ›´æ–°ï¼š
  â†’ updateEntry(index, { msgstr, needsReview: true })
  â†’ setTranslationStats(stats)
  â†’ æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯
```

### 3. è®°å¿†åº“ç®¡ç†æµç¨‹

```
æ‰“å¼€è®°å¿†åº“
  â†’ invoke('get_translation_memory')
  â†’ TranslationMemory { memory: IndexMap, stats, last_updated }
  â†’ Object.entries(memory) â†’ MemoryEntry[]
  â†’ æ˜¾ç¤ºåˆ—è¡¨

ä¿å­˜è®°å¿†åº“
  â†’ æ„é€  { memory, stats, last_updated }
  â†’ invoke('save_translation_memory', data)
  â†’ TranslationMemory.save_to_file()
  â†’ åˆ†ç¦»å†…ç½®/å­¦ä¹ éƒ¨åˆ†
  â†’ åªä¿å­˜ learned å­—æ®µï¼ˆJSONæ ¼å¼ï¼‰
```

---

## ğŸ§© æ ¸å¿ƒæ¨¡å—è¯¦è§£

### 1. POParser (po_parser.rs)

**èŒè´£**: POæ–‡ä»¶çš„è§£æå’Œå†™å…¥

**å…³é”®æ–¹æ³•**:
- `parse_file(path) -> Vec<POEntry>` - è§£æPOæ–‡ä»¶
- `write_file(path, entries)` - å†™å…¥POæ–‡ä»¶
- `parse_entry()` - è§£æå•ä¸ªæ¡ç›®
- `detect_encoding()` - æ£€æµ‹æ–‡ä»¶ç¼–ç 

**ç‰¹æ€§**:
- âœ… æ”¯æŒå¤šç§ç¼–ç ï¼ˆUTF-8, GBKç­‰ï¼‰
- âœ… ä¿ç•™æ³¨é‡Šå’Œæ ¼å¼
- âœ… å¤„ç†msgctxtä¸Šä¸‹æ–‡

---

### 2. AITranslator (ai_translator.rs)

**èŒè´£**: è°ƒç”¨AIè¿›è¡Œç¿»è¯‘ï¼Œç®¡ç†å¯¹è¯å†å²

**æ ¸å¿ƒå­—æ®µ**:
```rust
struct AITranslator {
    client: Client<OpenAIConfig>,    // OpenAIå®¢æˆ·ç«¯
    model: String,                   // æ¨¡å‹åç§°
    conversation_history: Vec<ChatCompletionRequestMessage>,
    tm: Option<TranslationMemory>,   // ç¿»è¯‘è®°å¿†åº“
    token_stats: TokenStats,         // Tokenç»Ÿè®¡
    batch_stats: BatchStats,         // æ‰¹æ¬¡ç»Ÿè®¡
}
```

**å…³é”®æµç¨‹**:
1. **é¢„å¤„ç†**: TMæŸ¥æ‰¾ + å»é‡
2. **AIç¿»è¯‘**: æ‰¹é‡è°ƒç”¨API
3. **åå¤„ç†**: å­¦ä¹ æ–°çŸ­è¯­ + ç»Ÿè®¡

**is_simple_phrase()è§„åˆ™** (ä¸Pythonä¸¥æ ¼ä¸€è‡´):
- é•¿åº¦ â‰¤ 35å­—ç¬¦
- å•è¯æ•° â‰¤ 5ä¸ª
- æ— å¥å­æ ‡ç‚¹ (`. ! ?`)
- æ— å ä½ç¬¦ (`{0}`)
- æ— è½¬ä¹‰å­—ç¬¦ (`\n`)
- æ— ç‰¹æ®Šç¬¦å· (`( ) [ ]`)
- éç–‘é—®å¥å¼€å¤´

---

### 3. TranslationMemory (translation_memory.rs)

**èŒè´£**: ç®¡ç†ç¿»è¯‘è®°å¿†åº“ï¼Œæä¾›TMæŸ¥æ‰¾å’Œå­¦ä¹ 

**æ•°æ®ç»“æ„**:
```rust
struct TranslationMemory {
    memory: IndexMap<String, String>,  // ä¿æŒæ’å…¥é¡ºåº
    stats: MemoryStats,
    last_updated: DateTime<Utc>,
}
```

**å†…ç½®çŸ­è¯­**: 83ä¸ªUEç›¸å…³æœ¯è¯­
```rust
// XTools å‘½åç©ºé—´
"XTools|Random" â†’ "XTools|éšæœº"
"XTools|Sort" â†’ "XTools|æ’åº"
...

// å¸¸è§æœ¯è¯­
"Connection" â†’ "è¿æ¥"
"Ascending" â†’ "å‡åº"
...
```

**ä¿å­˜æ ¼å¼** (ä¸Pythonä¸€è‡´):
```json
{
  "learned": {
    "Custom Phrase": "è‡ªå®šä¹‰çŸ­è¯­",
    ...
  },
  "last_updated": "2025-01-06T10:00:00Z",
  "stats": {
    "total_entries": 95,
    "learned_entries": 12,
    "builtin_entries": 83
  }
}
```

**å…³é”®**: åªä¿å­˜å­¦ä¹ çš„éƒ¨åˆ†ï¼Œä¸ä¿å­˜å†…ç½®çŸ­è¯­

---

### 4. BatchTranslator (batch_translator.rs)

**èŒè´£**: æ‰¹é‡ç¿»è¯‘æ•´ä¸ªç›®å½•

**æµç¨‹**:
1. æ‰«æç›®å½•è·å–POæ–‡ä»¶
2. é€ä¸ªæ–‡ä»¶ç¿»è¯‘
3. ç”ŸæˆæŠ¥å‘Š
4. ä¿å­˜TM

---

### 5. ConfigManager (config_manager.rs)

**èŒè´£**: ç®¡ç†åº”ç”¨é…ç½®

**é…ç½®é¡¹**:
```rust
struct AppConfig {
    api_key: String,
    provider: String,              // moonshot/openai
    model: String,
    base_url: Option<String>,
    use_translation_memory: bool,
    translation_memory_path: Option<String>,
    batch_size: usize,
    max_concurrent: usize,
    timeout_seconds: u64,
    auto_save: bool,
    log_level: String,
}
```

**å­˜å‚¨ä½ç½®**: `~/.po-translator/config.json`

---

## ğŸ¨ çŠ¶æ€ç®¡ç† (Zustand)

### å…¨å±€çŠ¶æ€ç»“æ„

```typescript
interface AppState {
  // æ–‡ä»¶çŠ¶æ€
  entries: POEntry[]           // æ‰€æœ‰æ¡ç›®
  currentEntry: POEntry | null // å½“å‰ç¼–è¾‘æ¡ç›®
  currentIndex: number         // å½“å‰ç´¢å¼•
  
  // ç¿»è¯‘çŠ¶æ€
  isTranslating: boolean       // æ˜¯å¦æ­£åœ¨ç¿»è¯‘
  progress: number             // ç¿»è¯‘è¿›åº¦ (0-100)
  report: TranslationReport | null
  
  // é…ç½®
  config: AppConfig | null
  
  // UIçŠ¶æ€ï¼ˆæŒä¹…åŒ–ï¼‰
  theme: 'light' | 'dark'
  language: 'zh-CN' | 'en-US'
  
  // Actions
  setEntries, updateEntry, setCurrentEntry,
  setTranslating, setProgress, setReport,
  toggleTheme, setLanguage, ...
}
```

### æŒä¹…åŒ–ç­–ç•¥

**æŒä¹…åŒ–**: `theme`, `language` (localStorage)  
**ä¸´æ—¶**: å…¶ä»–çŠ¶æ€ (å†…å­˜)

---

## ğŸ¯ å…³é”®è®¾è®¡åŸåˆ™

### 1. æ•°æ®ä¸€è‡´æ€§

**é—®é¢˜**: Rustå’Œå‰ç«¯çš„æ•°æ®æ ¼å¼å¿…é¡»ä¸¥æ ¼åŒ¹é…

**è§£å†³æ–¹æ¡ˆ**:
- Rust: ä½¿ç”¨ `#[derive(Serialize, Deserialize)]`
- TypeScript: å®šä¹‰åŒ¹é…çš„æ¥å£
- é€šè¿‡ `types/tauri.ts` ç»Ÿä¸€ç®¡ç†

### 2. ç¿»è¯‘è®°å¿†åº“é€»è¾‘

**æ ¸å¿ƒè§„åˆ™** (å¿…é¡»ä¸Pythonç‰ˆæœ¬ä¸€è‡´):
1. **åŠ è½½**: å†…ç½®çŸ­è¯­ + å­¦ä¹ éƒ¨åˆ†
2. **ä¿å­˜**: åªä¿å­˜å­¦ä¹ éƒ¨åˆ†
3. **å­¦ä¹ **: åªå­¦ä¹ ç®€å•çŸ­è¯­ï¼ˆis_simple_phrase()ï¼‰
4. **å»é‡**: ç”¨IndexMapä¿æŒæ’å…¥é¡ºåº

### 3. ä¸»é¢˜ç³»ç»Ÿ

**å®ç°æ–¹å¼**:
- ConfigProvider (Ant Design) - ç»„ä»¶çº§ä¸»é¢˜
- CSS `[data-theme]` å±æ€§ - è‡ªå®šä¹‰æ ·å¼
- `useTheme` hook - è¯­ä¹‰åŒ–é¢œè‰²

**é¢œè‰²ç³»ç»Ÿ**:
```typescript
semanticColors = {
  light: {
    bgPrimary: '#ffffff',
    textPrimary: 'rgba(0,0,0,0.88)',
    ...
  },
  dark: {
    bgPrimary: '#141414',
    textPrimary: 'rgba(255,255,255,0.88)',
    ...
  }
}
```

### 4. é”™è¯¯å¤„ç†

**å‰ç«¯**:
```typescript
try {
  const result = await invoke('command', params);
} catch (error) {
  message.error('æ“ä½œå¤±è´¥');
  console.error(error);
}
```

**åç«¯**:
```rust
#[tauri::command]
pub async fn command() -> Result<Data, String> {
    some_operation()
        .map_err(|e| e.to_string())
}
```

---

## ğŸ”§ å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

### 1. ç¿»è¯‘åè‡ªåŠ¨é‡å¯

**åŸå› **: `src-tauri/data/` æ–‡ä»¶å˜åŒ–è§¦å‘çƒ­é‡è½½

**è§£å†³**: æ”¹ç”¨ `../data/` (é¡¹ç›®æ ¹ç›®å½•)

### 2. è®°å¿†åº“æ¸…ç©ºæŠ¥é”™

**åŸå› **: å‰ç«¯æœªä¿å­˜ç©ºæ•°æ®ï¼Œåç«¯åŠ è½½å¤±è´¥

**è§£å†³**: æ¸…ç©ºæ—¶ç«‹å³ä¿å­˜ç©ºçš„ `learned: {}`

### 3. æš—è‰²æ¨¡å¼ä¸ç”Ÿæ•ˆ

**åŸå› **: ç¡¬ç¼–ç é¢œè‰²å€¼ï¼Œæœªä½¿ç”¨ä¸»é¢˜å˜é‡

**è§£å†³**: å…¨éƒ¨ä½¿ç”¨ `colors.xxx` è¯­ä¹‰åŒ–é¢œè‰²

### 4. è¯æ¡æ’åºæ··ä¹±

**åŸå› **: HashMapæ— åºï¼Œæ¯æ¬¡åŠ è½½é¡ºåºä¸åŒ

**è§£å†³**: ä½¿ç”¨ IndexMap ä¿æŒæ’å…¥é¡ºåº

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. ç¿»è¯‘ä¼˜åŒ–

- âœ… TMé¢„æŸ¥æ‰¾ï¼ˆé¿å…é‡å¤APIè°ƒç”¨ï¼‰
- âœ… æ–‡æœ¬å»é‡ï¼ˆç›¸åŒæ–‡æœ¬åªç¿»è¯‘ä¸€æ¬¡ï¼‰
- âœ… æ‰¹é‡ç¿»è¯‘ï¼ˆå‡å°‘ç½‘ç»œå¾€è¿”ï¼‰
- âœ… æ™ºèƒ½å­¦ä¹ ï¼ˆåªå­¦ä¹ ç®€å•çŸ­è¯­ï¼‰

### 2. UIä¼˜åŒ–

- âœ… è™šæ‹Ÿæ»šåŠ¨ï¼ˆå¤§æ•°æ®é‡ï¼‰- å¯é€‰
- âœ… çŠ¶æ€æœ¬åœ°åŒ–ï¼ˆå‡å°‘é‡æ¸²æŸ“ï¼‰
- âœ… æ‡’åŠ è½½ç»„ä»¶
- âœ… Debounceæœç´¢

### 3. å†…å­˜ä¼˜åŒ–

- âœ… Rustæ— GCï¼ˆä½å†…å­˜å ç”¨ï¼‰
- âœ… å¢é‡æ›´æ–°ï¼ˆä¸é‡æ–°åˆ›å»ºæ•°ç»„ï¼‰
- âœ… åŠæ—¶é‡Šæ”¾èµ„æº

---

## ğŸš€ éƒ¨ç½²æ¶æ„

### å¼€å‘æ¨¡å¼

```
npm run tauri:dev
  â†’ Vite Dev Server (å‰ç«¯çƒ­é‡è½½)
  â†’ Cargo (Rustç¼–è¯‘ + çƒ­é‡è½½)
  â†’ Tauriçª—å£ (WebView)
```

### ç”Ÿäº§æ„å»º

```
npm run tauri:build
  â†’ TypeScriptç¼–è¯‘
  â†’ Viteæ‰“åŒ… (dist/)
  â†’ Cargo releaseç¼–è¯‘
  â†’ æ‰“åŒ…ä¸ºå•ä¸€å¯æ‰§è¡Œæ–‡ä»¶
  â†’ è¾“å‡º: POç¿»è¯‘å·¥å…·.exe (~15MB)
```

---

## ğŸ“ å¼€å‘è§„èŒƒ

### 1. å‘½åçº¦å®š

**Rust**:
- æ–‡ä»¶: `snake_case.rs`
- ç»“æ„ä½“: `PascalCase`
- å‡½æ•°: `snake_case`
- å¸¸é‡: `UPPER_SNAKE_CASE`

**TypeScript**:
- æ–‡ä»¶: `PascalCase.tsx` (ç»„ä»¶) / `camelCase.ts` (å·¥å…·)
- ç»„ä»¶: `PascalCase`
- å‡½æ•°: `camelCase`
- å¸¸é‡: `UPPER_SNAKE_CASE`

### 2. æäº¤è§„èŒƒ

```
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤bug
refactor: é‡æ„
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼
perf: æ€§èƒ½ä¼˜åŒ–
test: æµ‹è¯•ç›¸å…³
```

### 3. ä»£ç ç»„ç»‡

- ä¸€ä¸ªåŠŸèƒ½ä¸€ä¸ªæ–‡ä»¶
- ç›¸å…³åŠŸèƒ½æ”¾åœ¨åŒä¸€ç›®å½•
- å…¬å…±é€»è¾‘æŠ½å–åˆ° utils/hooks
- ç±»å‹å®šä¹‰é›†ä¸­ç®¡ç†

---

## ğŸ”® æœªæ¥æ‰©å±•

### è®¡åˆ’åŠŸèƒ½

- [ ] å¤šè¯­è¨€ç¿»è¯‘ï¼ˆä¸ä»…ä¸­è‹±ï¼‰
- [ ] æœ¯è¯­åº“ç®¡ç†
- [ ] ç¿»è¯‘å®¡æ ¸æµç¨‹
- [ ] åä½œç¿»è¯‘ï¼ˆå¤šäººï¼‰
- [ ] äº‘ç«¯åŒæ­¥
- [ ] æ’ä»¶ç³»ç»Ÿ

### æŠ€æœ¯æ¼”è¿›

- [ ] å‡çº§åˆ° Tauri v2
- [ ] ä½¿ç”¨ SWC æ›¿ä»£ Babel
- [ ] WebAssembly åŠ é€Ÿ
- [ ] æœ¬åœ°AIæ¨¡å‹æ”¯æŒ

---

## ğŸ“š å‚è€ƒæ–‡æ¡£

- [Tauri å®˜æ–¹æ–‡æ¡£](https://tauri.app/)
- [Ant Design React](https://ant.design/)
- [Zustand çŠ¶æ€ç®¡ç†](https://github.com/pmndrs/zustand)
- [async-openai](https://docs.rs/async-openai/)
- [IndexMap](https://docs.rs/indexmap/)

---

**ç»´æŠ¤è€…**: PO-i10n Team  
**æœ€åæ›´æ–°**: 2025-01-06

